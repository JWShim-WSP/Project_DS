var symbols = {
    "AED": "United Arab Emirates Dirham",
    "AFN": "Afghan Afghani",
    "ALL": "Albanian Lek",
    "AMD": "Armenian Dram",
    "ANG": "Netherlands Antillean Guilder",
    "AOA": "Angolan Kwanza",
    "ARS": "Argentine Peso",
    "AUD": "Australian Dollar",
    "AWG": "Aruban Florin",
    "AZN": "Azerbaijani Manat",
    "BAM": "Bosnia-Herzegovina Convertible Mark",
    "BBD": "Barbadian Dollar",
    "BDT": "Bangladeshi Taka",
    "BGN": "Bulgarian Lev",
    "BHD": "Bahraini Dinar",
    "BIF": "Burundian Franc",
    "BMD": "Bermudan Dollar",
    "BND": "Brunei Dollar",
    "BOB": "Bolivian Boliviano",
    "BRL": "Brazilian Real",
    "BSD": "Bahamian Dollar",
    "BTC": "Bitcoin",
    "BTN": "Bhutanese Ngultrum",
    "BWP": "Botswanan Pula",
    "BYN": "New Belarusian Ruble",
    "BYR": "Belarusian Ruble",
    "BZD": "Belize Dollar",
    "CAD": "Canadian Dollar",
    "CDF": "Congolese Franc",
    "CHF": "Swiss Franc",
    "CLF": "Chilean Unit of Account (UF)",
    "CLP": "Chilean Peso",
    "CNY": "Chinese Yuan",
    "COP": "Colombian Peso",
    "CRC": "Costa Rican Col\u00f3n",
    "CUC": "Cuban Convertible Peso",
    "CUP": "Cuban Peso",
    "CVE": "Cape Verdean Escudo",
    "CZK": "Czech Republic Koruna",
    "DJF": "Djiboutian Franc",
    "DKK": "Danish Krone",
    "DOP": "Dominican Peso",
    "DZD": "Algerian Dinar",
    "EGP": "Egyptian Pound",
    "ERN": "Eritrean Nakfa",
    "ETB": "Ethiopian Birr",
    "EUR": "Euro",
    "FJD": "Fijian Dollar",
    "FKP": "Falkland Islands Pound",
    "GBP": "British Pound Sterling",
    "GEL": "Georgian Lari",
    "GGP": "Guernsey Pound",
    "GHS": "Ghanaian Cedi",
    "GIP": "Gibraltar Pound",
    "GMD": "Gambian Dalasi",
    "GNF": "Guinean Franc",
    "GTQ": "Guatemalan Quetzal",
    "GYD": "Guyanaese Dollar",
    "HKD": "Hong Kong Dollar",
    "HNL": "Honduran Lempira",
    "HRK": "Croatian Kuna",
    "HTG": "Haitian Gourde",
    "HUF": "Hungarian Forint",
    "IDR": "Indonesian Rupiah",
    "ILS": "Israeli New Sheqel",
    "IMP": "Manx pound",
    "INR": "Indian Rupee",
    "IQD": "Iraqi Dinar",
    "IRR": "Iranian Rial",
    "ISK": "Icelandic Kr\u00f3na",
    "JEP": "Jersey Pound",
    "JMD": "Jamaican Dollar",
    "JOD": "Jordanian Dinar",
    "JPY": "Japanese Yen",
    "KES": "Kenyan Shilling",
    "KGS": "Kyrgystani Som",
    "KHR": "Cambodian Riel",
    "KMF": "Comorian Franc",
    "KPW": "North Korean Won",
    "KRW": "South Korean Won",
    "KWD": "Kuwaiti Dinar",
    "KYD": "Cayman Islands Dollar",
    "KZT": "Kazakhstani Tenge",
    "LAK": "Laotian Kip",
    "LBP": "Lebanese Pound",
    "LKR": "Sri Lankan Rupee",
    "LRD": "Liberian Dollar",
    "LSL": "Lesotho Loti",
    "LTL": "Lithuanian Litas",
    "LVL": "Latvian Lats",
    "LYD": "Libyan Dinar",
    "MAD": "Moroccan Dirham",
    "MDL": "Moldovan Leu",
    "MGA": "Malagasy Ariary",
    "MKD": "Macedonian Denar",
    "MMK": "Myanma Kyat",
    "MNT": "Mongolian Tugrik",
    "MOP": "Macanese Pataca",
    "MRO": "Mauritanian Ouguiya",
    "MUR": "Mauritian Rupee",
    "MVR": "Maldivian Rufiyaa",
    "MWK": "Malawian Kwacha",
    "MXN": "Mexican Peso",
    "MYR": "Malaysian Ringgit",
    "MZN": "Mozambican Metical",
    "NAD": "Namibian Dollar",
    "NGN": "Nigerian Naira",
    "NIO": "Nicaraguan C\u00f3rdoba",
    "NOK": "Norwegian Krone",
    "NPR": "Nepalese Rupee",
    "NZD": "New Zealand Dollar",
    "OMR": "Omani Rial",
    "PAB": "Panamanian Balboa",
    "PEN": "Peruvian Nuevo Sol",
    "PGK": "Papua New Guinean Kina",
    "PHP": "Philippine Peso",
    "PKR": "Pakistani Rupee",
    "PLN": "Polish Zloty",
    "PYG": "Paraguayan Guarani",
    "QAR": "Qatari Rial",
    "RON": "Romanian Leu",
    "RSD": "Serbian Dinar",
    "RUB": "Russian Ruble",
    "RWF": "Rwandan Franc",
    "SAR": "Saudi Riyal",
    "SBD": "Solomon Islands Dollar",
    "SCR": "Seychellois Rupee",
    "SDG": "Sudanese Pound",
    "SEK": "Swedish Krona",
    "SGD": "Singapore Dollar",
    "SHP": "Saint Helena Pound",
    "SLE": "Sierra Leonean Leone",
    "SLL": "Sierra Leonean Leone",
    "SOS": "Somali Shilling",
    "SRD": "Surinamese Dollar",
    "STD": "S\u00e3o Tom\u00e9 and Pr\u00edncipe Dobra",
    "SVC": "Salvadoran Col\u00f3n",
    "SYP": "Syrian Pound",
    "SZL": "Swazi Lilangeni",
    "THB": "Thai Baht",
    "TJS": "Tajikistani Somoni",
    "TMT": "Turkmenistani Manat",
    "TND": "Tunisian Dinar",
    "TOP": "Tongan Pa\u02bbanga",
    "TRY": "Turkish Lira",
    "TTD": "Trinidad and Tobago Dollar",
    "TWD": "New Taiwan Dollar",
    "TZS": "Tanzanian Shilling",
    "UAH": "Ukrainian Hryvnia",
    "UGX": "Ugandan Shilling",
    "USD": "United States Dollar",
    "UYU": "Uruguayan Peso",
    "UZS": "Uzbekistan Som",
    "VEF": "Venezuelan Bol\u00edvar Fuerte",
    "VES": "Sovereign Bolivar",
    "VND": "Vietnamese Dong",
    "VUV": "Vanuatu Vatu",
    "WST": "Samoan Tala",
    "XAF": "CFA Franc BEAC",
    "XAG": "Silver (troy ounce)",
    "XAU": "Gold (troy ounce)",
    "XCD": "East Caribbean Dollar",
    "XDR": "Special Drawing Rights",
    "XOF": "CFA Franc BCEAO",
    "XPF": "CFP Franc",
    "YER": "Yemeni Rial",
    "ZAR": "South African Rand",
    "ZMK": "Zambian Kwacha (pre-2013)",
    "ZMW": "Zambian Kwacha",
    "ZWL": "Zimbabwean Dollar"
}
var latestRates = {
"base": "USD",
"date": "2023-02-24",
"rates": {
"AED": 3.67292,
"AFN": 88.910269,
"ALL": 108.624089,
"AMD": 392.993411,
"ANG": 1.802652,
"AOA": 503.8311,
"ARS": 195.315602,
"AUD": 1.471486,
"AWG": 1.8,
"AZN": 1.69913,
"BAM": 1.844896,
"BBD": 2.019582,
"BDT": 107.096799,
"BGN": 1.84552,
"BHD": 0.37697,
"BIF": 2078.07128,
"BMD": 1,
"BND": 1.34269,
"BOB": 6.911729,
"BRL": 5.137778,
"BSD": 1.000226,
"BTC": 4.1917928e-05,
"BTN": 82.744908,
"BWP": 13.283278,
"BYN": 2.524689,
"BYR": 19600,
"BZD": 2.016186,
"CAD": 1.355515,
"CDF": 2046.500211,
"CHF": 0.935303,
"CLF": 0.029149,
"CLP": 804.30406,
"CNY": 6.936095,
"COP": 4876.77,
"CRC": 558.044115,
"CUC": 1,
"CUP": 26.5,
"CVE": 104.009357,
"CZK": 22.334,
"DJF": 178.095759,
"DKK": 7.02873,
"DOP": 55.756833,
"DZD": 136.784954,
"EGP": 30.628538,
"ERN": 15,
"ETB": 53.783463,
"EUR": 0.94424,
"FJD": 2.207102,
"FKP": 0.83212,
"GBP": 0.83155,
"GEL": 2.634999,
"GGP": 0.83212,
"GHS": 12.903141,
"GIP": 0.83212,
"GMD": 61.10435,
"GNF": 8603.027873,
"GTQ": 7.81195,
"GYD": 211.05703,
"HKD": 7.846945,
"HNL": 24.659951,
"HRK": 7.054794,
"HTG": 149.310016,
"HUF": 359.635013,
"IDR": 15233,
"ILS": 3.64353,
"IMP": 0.83212,
"INR": 82.772965,
"IQD": 1459.868886,
"IRR": 42349.999829,
"ISK": 144.189817,
"JEP": 0.83212,
"JMD": 154.321046,
"JOD": 0.709398,
"JPY": 134.836991,
"KES": 126.499385,
"KGS": 87.42001,
"KHR": 4054.915721,
"KMF": 462.850061,
"KPW": 899.968194,
"KRW": 1305.879876,
"KWD": 0.306903,
"KYD": 0.833561,
"KZT": 448.4019,
"LAK": 16867.846043,
"LBP": 15013.346916,
"LKR": 365.082794,
"LRD": 157.811333,
"LSL": 18.269948,
"LTL": 2.95274,
"LVL": 0.604891,
"LYD": 4.819273,
"MAD": 10.399193,
"MDL": 18.804154,
"MGA": 4303.095759,
"MKD": 58.119682,
"MMK": 2100.485493,
"MNT": 3520.725844,
"MOP": 8.083631,
"MRO": 356.999828,
"MUR": 46.054185,
"MVR": 15.349715,
"MWK": 1027.347759,
"MXN": 18.39746,
"MYR": 4.436009,
"MZN": 63.088633,
"NAD": 18.269853,
"NGN": 460.440137,
"NIO": 36.547912,
"NOK": 10.314545,
"NPR": 132.388521,
"NZD": 1.607035,
"OMR": 0.38502,
"PAB": 1.000245,
"PEN": 3.807799,
"PGK": 3.569711,
"PHP": 55.064498,
"PKR": 261.057849,
"PLN": 4.461657,
"PYG": 7312.506485,
"QAR": 3.641013,
"RON": 4.646017,
"RSD": 110.819823,
"RUB": 75.115023,
"RWF": 1088.439481,
"SAR": 3.752166,
"SBD": 8.266721,
"SCR": 13.330878,
"SDG": 587.500316,
"SEK": 10.40825,
"SGD": 1.344031,
"SHP": 1.21675,
"SLE": 20.074723,
"SLL": 19750.00006,
"SOS": 568.489175,
"SRD": 33.470192,
"STD": 20697.981008,
"SVC": 8.752535,
"SYP": 2512.496161,
"SZL": 18.316591,
"THB": 34.887499,
"TJS": 10.917863,
"TMT": 3.51,
"TND": 3.152502,
"TOP": 2.35285,
"TRY": 18.88334,
"TTD": 6.793188,
"TWD": 30.581499,
"TZS": 2340.000165,
"UAH": 36.759923,
"UGX": 3725.905419,
"USD": 1,
"UYU": 39.325922,
"UZS": 11319.769087,
"VEF": 2433504.258566,
"VES": 24.370899,
"VND": 23792.5,
"VUV": 119.528182,
"WST": 2.670181,
"XAF": 618.733965,
"XAG": 0.047129,
"XAU": 0.000549,
"XCD": 2.70255,
"XDR": 0.750736,
"XOF": 618.733965,
"XPF": 112.250035,
"YER": 250.350055,
"ZAR": 18.269404,
"ZMK": 9001.206495,
"ZMW": 19.679391,
"ZWL": 321.999592
},
"success": true,
"timestamp": 1677225483
}

document.addEventListener('DOMContentLoaded', function(){
    document.querySelector('.currencyform').onsubmit=function(){
        // Send a GET request to the URL
        fetch("https://api.exchangeratesapi.io/latest?&base=USD")
        //fetch("https://api.apilayer.com/exchangerates_data/latest?symbols=EUR,CAD,KRW,GBP,JPY&base=USD", requestOptions)
        // Put response into json form
        .then(response=>response.json())
        .then(data=>{
            //Get currency from user input and convert to upper case
            const currency= document.querySelector('#country').value.toUpperCase();
            const USDAmount= document.querySelector('#USDAmount').value;
            const SelectedAmount= document.querySelector('#SelectedAmount').value;
            //Get rate from data
            //const rate = data.rates[currency];
            const rate = latestRates.rates[currency];
            //check if currency is valid:
            if (rate !== undefined) {
                //Display exchange on the screen
                document.querySelector('#RateResult').innerHTML ='1 USD is equal to ' + rate.toFixed(3) + ' ' + currency +'.';
                if (USDAmount) {
                    document.querySelector('#resultSelected').innerHTML = Number(((rate *  USDAmount).toFixed(2))).toLocaleString("en-US") + ' '+ currency; //toLocaleString to work it should go back to number (Number)
                }
                if (SelectedAmount) {
                    document.querySelector('#resultUSD').innerHTML = Number(((SelectedAmount / rate).toFixed(2))).toLocaleString("en-US") + " USD"; //toLocaleString to work it should go back to number (Number)
                }
            }
            else {
                //Display error on the screen
                document.querySelector('#RateResult').innerHTML='Invalid Currency';
            }
        })
        //Catch any errors and log them to the console
        .catch(error=>{
            document.querySelector('#RateResult').innerHTML=error;
        });
        //Prevent default submission
        return false;
    }
});